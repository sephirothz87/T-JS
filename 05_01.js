//5     æ­£åˆ™çš„æ‰©å±•


console.log('=============================RegExpæ„é€ å‡½æ•°=============================');
//ES5
let r1 = new RegExp('xyz', 'i');
let r2 = new RegExp(/xyz/i);
let r3 = /xyz/i;
//è¿™ä¸‰ç§æ˜¯ä¸€æ ·çš„
console.log(r1);//  /xyz/i
console.log(r2);//  /xyz/i
console.log(r3);//  /xyz/i

// é¡ºå¸¦æä¸€ä¸‹ï¼ŒRegExpæ˜¯å¼•ç”¨ç±»å‹
let r4 = /xyz/i;
console.log(r3 == r4);//false
let r5 = r4;
console.log(r5 === r4);//true

// ä½†æ˜¯è¿™æ ·å†™åœ¨ES5å°±ä¼šæŠ¥é”™,ES6åˆ™ä¸ä¼š
let r6 = new RegExp(/xyz/, 'i');
console.log(r6);//  /xyz/i
// è¿˜è¦æ³¨æ„çš„æ˜¯ç¬¬äºŒä¸ªå±æ€§ä¼šè¦†ç›–å‰é¢æ­£åˆ™çš„åŒ¹é…è§„åˆ™
console.log(new RegExp(/xyz/ig, 'i'));//  /xyz/i
console.log(new RegExp(/xyz/i, 'ig'));// /xyz/gi
console.log(new RegExp(/xyz/i, 'g'));//  /xyz/g


console.log('=============================å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•=============================');
//å­—ç¬¦ä¸²çš„4ä¸ªæ–¹æ³•
//match,replace,search,split
//åœ¨ES6ä¸­å…¨éƒ¨å˜æˆè°ƒç”¨RegExpçš„å®ä¾‹æ–¹æ³•ï¼Œå³æ‰€æœ‰å’Œæ­£åˆ™ç›¸å…³çš„æ–¹æ³•éƒ½åœ¨RegExpåä¸‹äº†


console.log('=============================uä¿®é¥°ç¬¦=============================');
//æ–°å¢çš„unicodeæ¨¡å¼
console.log('\uD83D\uDC2A');//  ğŸª
console.log(/^\uD83D/u.test('\uD83D\uDC2A')); // false
console.log(/^\uD83D/.test('\uD83D\uDC2A')); // true

//è¿™æ˜¯ä¸€ä¸ªåŒå­—èŠ‚çš„unicodeå­—ç¬¦ï¼Œå¦‚æœåœ¨ES5ä¸­ï¼Œæ²¡æœ‰uæ¨¡å¼å°±ä¼šæŒ‰ç…§å•å­—èŠ‚åŒ¹é…è¾“å‡ºtrue
//ES6ä¸­ä½¿ç”¨uæ¨¡å¼ï¼Œå°±èƒ½æ­£ç¡®åŒºåˆ†åŒå­—èŠ‚å­—ç¬¦ï¼Œä»è€Œæ­£ç¡®testä¸ºfalse

//æ³¨æ„1   ç‚¹å­—ç¬¦å¯¹äºç ç‚¹å¤§äºFFFFçš„Unicodeå­—ç¬¦ä¸èƒ½åŒ¹é…,å¿…é¡»åŠ ä¸Šuæ¨¡å¼
var s1 = 'ğ ®·';
console.log(/^.$/.test(s1)); // false
console.log(/^.$/u.test(s1)); // true

//æ³¨æ„2   ES6ä¸­å¢åŠ äº†{}è¡¨ç¤ºunicodeçš„æ–¹æ³•ï¼Œå¦‚æœæ­£åˆ™ä¸­ç”¨äº†è¿™ç§æ–¹æ³•ï¼Œ\uæ¨¡å¼å°±æ˜¯unicodeè¡¨ç¤ºçš„å¤§æ‹¬å·ï¼Œæ­¤å¤–åˆ™æ˜¯ç¬¦å·
console.log(/\u{61}/.test('a')); // false
console.log(/\u{61}/u.test('a')); // true
console.log(/\u{20BB7}/u.test('ğ ®·')); // true

//ä½œä¸ºé‡è¯åˆ™åªå¯¹ç ç‚¹å¤§äºFFFFçš„å­—ç¬¦å¿…é¡»å†™u
console.log(/a{2}/.test('aa')); // true
console.log(/a{2}/u.test('aa')); // true
console.log(/ğ ®·{2}/.test('ğ ®·ğ ®·')); // false
console.log(/ğ ®·{2}/u.test('ğ ®·ğ ®·')); // true

//\Så¿…é¡»å†™uæ‰è¡Œ
console.log(/^\S$/.test('ğ ®·')); // false
console.log(/^\S$/u.test('ğ ®·')); // true

//\u212ä¹Ÿæ˜¯å¤§å†™å­—æ¯Kï¼Œè¿™ç§æƒ…å†µä¸‹åªç”¨iæ— æ³•åŒ¹é…åˆ°
console.log(/[a-z]/i.test('\u212A')); // false
console.log(/^\S$/iu.test('ğ ®·')); // true


console.log('=============================yä¿®é¥°ç¬¦=============================');
//é»è¿åŒ¹é…
//åŒºåˆ«äºgæ¨¡å¼ï¼Œgæ¨¡å¼åŒ¹é…åˆ°ä¹‹åå°±ä»å‰©ä¸‹çš„éƒ¨åˆ†åŒ¹é…
//yæ¨¡å¼åªä»å‰©ä¸‹éƒ¨åˆ†çš„ç¬¬ä¸€ä¸ªå€¼å¼€å§‹åŒ¹é…
//è§£é‡Šè´¹åŠ²ï¼Œè¿˜æ˜¯çœ‹ä¾‹å­å§

let s2 = 'aaa_aa_a';
let r7 = /a+/g;
let r8 = /a+/y;

console.log(r7.exec(s2));//aaa
console.log(r7.exec(s2));//aa

console.log(r8.exec(s2));//aaa
console.log(r8.exec(s2));//null
//å› ä¸ºyæ¨¡å¼ä¸‹ï¼ŒåŒ¹é…å®Œaaaåä»_å¼€å§‹åŒ¹é…ï¼ŒåŒ¹é…ä¸åˆ°å°±è¿”å›nulläº†

let r9 = /a+_/y;
console.log(r9.exec(s2));//aaa_
console.log(r9.exec(s2));//aa_
console.log(r9.exec(s2));//null

//åœ¨matchçš„æ—¶å€™ï¼Œyåˆä¸å†éµå¾ªå…¨å±€åŒ¹é…çš„æ¨¡å¼äº†ï¼Œå¿…é¡»å’Œgè¿ç”¨æ‰è¡Œ
console.log('a1a2a3'.match(/a\d/y)); // ["a1"]
console.log('a1a2a3'.match(/a\d/gy)); // ["a1", "a2", "a3"]


console.log('=============================stickyå±æ€§=============================');
//stickyå¯ä»¥è·å¾—æ­£åˆ™æ˜¯å¦æ˜¯é»è¿çš„
console.log(r7.sticky);//false
console.log(r8.sticky);//true


console.log('=============================flagså±æ€§=============================');
//ES5çš„sourceå±æ€§
console.log(/abc/ig.source);//abc
//ES6å¢åŠ çš„flagså±æ€§
console.log(/abc/ig.flags);//gi


console.log('=============================sä¿®é¥°ç¬¦ï¼šdotAllæ¨¡å¼=============================');
//.ä¸æ”¯æŒçš„æƒ…å†µæœ‰ä¸¤ç§
//ä¸€ç§æ˜¯åˆšæ‰æåˆ°çš„åŒå­—èŠ‚Unicodeå­—ç¬¦æ— æ³•åŒ¹é…ï¼ŒES6ç»™å‡ºäº†uæ¨¡å¼è§£å†³
//ä¸€ç§æ˜¯æƒ³åŒ¹é…ç»ˆæ­¢ç¬¦çš„æƒ…å†µ
// ES6å¢åŠ äº†æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¾ˆå¤šæƒ…å†µå¯èƒ½å­—ç¬¦ä¸²çš„ä¸­é—´å­˜åœ¨ç»ˆæ­¢ç¬¦
// å¦‚æœæˆ‘ä»¬å¸Œæœ›åŒ¹é…åˆ°ç»ˆæ­¢ç¬¦è¯¥æ€ä¹ˆåŠå‘¢

console.log(/foo.bar/.test('foo\nbar'));//false
//ä¸€ç§å˜é€šçš„æ–¹æ³•
console.log(/foo[^]bar/.test('foo\nbar'));//true
//dotAllæ¨¡å¼
console.log(/foo.bar/s.test('foo\nbar'));//true

// dotAllå±æ€§
console.log(/foo[^]bar/.dotAll);//false
console.log(/foo[^]bar/s.dotAll);//true
console.log(/foo[^]bar/s.flags);//'s'


console.log('=============================[ES2018]åè¡Œæ–­è¨€=============================');
//ES5åªæ”¯æŒå…ˆè¡Œæ–­è¨€ï¼Œå³?=?!è¿™ç§
//æˆ‘æ‰çŸ¥é“ES5çš„æ­£åˆ™ä¸æ”¯æŒè¿™ç§å¿½ç•¥æ¨¡å¼,pythonæ—©å°±ç”¨çš„é£èµ·äº†
//åè¡Œæ–­è¨€çš„è¯­æ³•æ˜¯?<=å’Œ?<!
console.log(/(?<=\$)\d+/.exec('Benjamin Franklin is on the $100 bill'));//100
console.log(/(?<!\$)\d+/.exec('itâ€™s is worth about â‚¬90'));//90

//æ³¨æ„åŒ¹é…é¡ºåºï¼Œå¯èƒ½ä¼šå’Œæ­£å¸¸çš„ç»“æœä¸åŒï¼Œä½†æ˜¯ä¹Ÿæ²¡è°è¿™ä¹ˆç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å§
console.log(/(?<=(\d+)(\d+))$/.exec('1053'));//["", "1", "053"]
console.log(/^(\d+)(\d+)$/.exec('1053'));// ["1053", "105", "3"]


console.log('=============================[ES2018]Unicodeå±æ€§ç±»=============================');
//å’Œå‰é¢æœ‰ä¸€ä¸ªä¾‹å­ç”¨[a-z]åŒ¹é…unicodeä¸­å¦å¤–ä¸€ä¸ªKå­—æ¯çš„ä¾‹å­ç±»ä¼¼
// const r10 = /^\p{Decimal_Number}+$/u;
// console.log(r10.test('ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼'));//true
// chromeä¸æ”¯æŒè¿™ä¸ªè¯­æ³•


console.log('=============================[ES2018]å…·åç»„åŒ¹é…=============================');
// ä¸€ä¸ªåŒ¹é…åç›´æ¥åˆ†é…keyçš„æ–¹æ³•ï¼Œè§£å†³äº†æ­£åˆ™åŒ¹é…å‡ºæ¥çš„ä¸œè¥¿éƒ½åœ¨æ•°ç»„é‡Œè¿˜è¦å•ç‹¬æå–å‡ºæ¥å‘½åçš„éº»çƒ¦
// const RE_DATE = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
//
// const matchObj = RE_DATE.exec('1999-12-31');
// const year = matchObj.groups.year; // 1999
// const month = matchObj.groups.month; // 12
// const day = matchObj.groups.day; // 31
// chromeä¸æ”¯æŒè¿™ä¸ªè¯­æ³•


console.log('=============================[ESxxxx]String.prototype.matchAll=============================');
// ç›®å‰åªæ˜¯ä¸€ä¸ªææ¡ˆï¼Œç”¨ä¸€ä¸ªè¯­æ³•ç›´æ¥ä»¥åŒ¹é…+éå†ç»“æœ
// æˆ‘è§‰å¾—å­¦ä¹ æˆæœ¬æ¯”ä½¿ç”¨æˆæœ¬é«˜å¤šäº†

// ç†æƒ³çš„æ•ˆæœ
// const string = 'test1test2test3';
// const regex = /t(e)(st(\d?))/g;
// for (const match of string.matchAll(regex)) {
//     console.log(match);
// }
// // ["test1", "e", "st1", "1", index: 0, input: "test1test2test3"]
// // ["test2", "e", "st2", "2", index: 5, input: "test1test2test3"]
// // ["test3", "e", "st3", "3", index: 10, input: "test1test2test3"]


//æ€»ç»“
// 1.RegExpæ„é€ å‡½æ•°
// å…è®¸new RegExp(/abc/,'i')è¿™ç§å½¢å¼
// 2.å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•
// ç»‘å®šå›äº†RegExp
// 3.uä¿®é¥°ç¬¦
// ä¸»è¦è§£å†³unicodeåŒå­—èŠ‚å­—ç¬¦çš„é—®é¢˜
// 4.yä¿®é¥°ç¬¦
// é»è¿æ¨¡å¼
// gæ˜¯åŒ¹é…ä¹‹åå†ä»å‰©ä¸‹çš„åŒ¹é…
// yæ˜¯åŒ¹é…ä¹‹åå†ä»å‰©ä¸‹çš„å¼€å¤´åŒ¹é…
// ç›¸å½“äºç¬¬äºŒæ¬¡åŒ¹é…çš„æ—¶å€™åœ¨æ­£åˆ™å¼çš„å¼€å¤´åŠ äº†ä¸ª^
// 5.stickyå±æ€§
// æ£€æŸ¥yæ¨¡å¼
// 6.flagså±æ€§
// ES5å¹¶æ²¡æœ‰è·å–æ¨¡å¼çš„å±æ€§ï¼Œflagså¯ä»¥å®ç°
// 7.sä¿®é¥°ç¬¦ï¼šdotAllæ¨¡å¼
// è®©.å¯ä»¥åŒ¹é…ç»ˆç»“ç¬¦çš„æ¨¡å¼
// 8.åè¡Œæ–­è¨€(ES2018)
// ES5å¹¶ä¸æ”¯æŒï¼Œåªæ”¯æŒå‰è¡Œ?= ?!
// è¿™é‡Œçš„è¯­æ³•æ˜¯?<= ?<!
// 9.Unicodeå±æ€§ç±»(ES2018)
// å®šä¹‰äº†ä¸€äº›å…³é”®å­—ï¼Œå¯ä»¥è¯†åˆ«unicodeä¸­å¥‡æ€ªçš„æ•°å­—æˆ–è€…å­—æ¯å½¢å¼ï¼Œè®©ä»–ä»¬ä¾ç„¶å¯ä»¥æŒ‰ç…§æ•°å­—æˆ–å­—æ¯åŒ¹é…æˆåŠŸ
// 10.å…·åç»„åŒ¹é…(ES2018)
// è®©åŒ¹é…ç»“æœå¯ä»¥ç›´æ¥æ˜ å°„åˆ°keyä¸­ï¼Œä¸åœ¨åªæ˜¯ç”¨æ•°ç»„ç´¢å¼•
// 11.String.prototype.matchAll(ESxxxx)
// ä¸€ç§ç†æƒ³åŒ–çš„è¯­æ³•ï¼Œå¯ä»¥è®©æ­£åˆ™åŒ¹é…â€”â€”æ˜ å°„keyå€¼â€”â€”éå†ç»“æœï¼Œè¿™ä¸€äº›åˆ—æ“ä½œåœ¨ä¸€ä¸ªè¯­æ³•å¾ªç¯ä½“é‡Œè§£å†³
//
// åæ§½ä¸€å¥ESå†è¿™ä¹ˆæŠ˜è…¾ä¸‹å»çœŸçš„è¦è¢«é‚£äº›å¼ºç±»å‹çš„æ–¹è¨€ä»£æ›¿äº†ï¼ŒES6ä»¥åéƒ½æ›´æ–°çš„äº›ä»€ä¹ˆç©æ„å•Šï¼Œæ„Ÿè§‰æ ¹æœ¬æ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿